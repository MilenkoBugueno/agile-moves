.row
  .col-md-8
    .page-header
      %h3=t("navigation.certifications")
  .col-md-4
    %br
    .btn-group
      %button.btn.btn-info.dropdown-toggle{"type"=>"button", "data-toggle"=>"dropdown"}
        =@user.name
        %span.caret
      %ul.dropdown-menu{"role"=>"menu"}
        %li
          -@project.users.each do |user|
            =link_to user.name, "#"
    .btn-group
      %button.btn.btn-info.dropdown-toggle{"type"=>"button", "data-toggle"=>"dropdown"}
        =t("simple_form.labels.certification.active")
        %span.caret
      %ul.dropdown-menu{"role"=>"menu"}
        %li
          =link_to "All", "#"

.row
  .col-md-12
    %table.table.table-striped
      %thead
        %tr
          %th
          %th= t("simple_form.labels.certification.title")
          %th= t("simple_form.labels.certification.label")
          %th= t("simple_form.labels.certification.level")
          %th= t("simple_form.labels.registration.user_id")
          %th= t("simple_form.labels.registration.user_ids")
          %th=t '.actions', :default => t("simple_form.labels.certification.progress")
      %tbody
        - @certifications.each do |certification|
          -my_registration = certification.get_registration(current_user)
          %tr
            %td
            %td
              -if my_registration.present?
                = link_to certification.title, registration_path(my_registration, project_id: @project.id)
              -else
                = link_to certification.title, certification_path(certification, project_id: @project.id)
            %td= certification.label
            %td
              = get_level_title(certification.level_id)
            %td= my_registration.user.name if my_registration.present?
            %td
              -if my_registration.present?
                -my_registration.users.each do |user|
                  = user.name + "- "
            %td

              -if my_registration.present?
                .progress
                  .progress-bar.progress-bar-success{:role=>"progressbar", "aria-valuenow"=>"#{my_registration.approved_moves.count}", "aria-valuemin"=>"0", "aria-valuemax"=>"#{certification.moves_number}", "style"=>"width: #{get_progressbar_width(my_registration)}%;"}
                    =my_registration.moves.count
                  %p{:style => 'float: right;'}
                    =certification.moves_number if certification.moves_number.present?
              -else
                = link_to t("helpers.links.registrate"), new_registration_path(certification_id: certification.id), :class => 'btn btn-primary btn-mini'


